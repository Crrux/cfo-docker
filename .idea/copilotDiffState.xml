<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/.gitignore">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/.gitignore" />
              <option name="originalContent" value="**/node_modules&#10;**/dist&#10;**/.env*&#10;/test&#10;*.sh&#10;*.bat&#10;/front/public/assets/video/Evenements.mp4&#10;/front/public/assets/video/Header.mp4&#10;&#10;/.vscode&#10;/.idea/&#10;" />
              <option name="updatedContent" value="**/node_modules&#10;**/dist&#10;**/.env*&#10;/test&#10;*.sh&#10;*.bat&#10;/front/public/assets/video/Evenements.mp4&#10;/front/public/assets/video/Header.mp4&#10;**/database.sqlite&#10;&#10;/.vscode&#10;/.idea/&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front/src/context/AuthContext.jsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front/src/context/AuthContext.jsx" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="import { createContext, useContext, useState, useEffect } from 'react';&#10;import { authService } from '../services/authService';&#10;&#10;const AuthContext = createContext(null);&#10;&#10;export const AuthProvider = ({ children }) =&gt; {&#10;  const [isAuthenticated, setIsAuthenticated] = useState(false);&#10;  const [user, setUser] = useState(null);&#10;  const [loading, setLoading] = useState(true);&#10;&#10;  // Vérifier l'authentification au chargement&#10;  useEffect(() =&gt; {&#10;    checkAuth();&#10;  }, []);&#10;&#10;  // Rafraîchir le token automatiquement toutes les 12 minutes (token expire dans 15min)&#10;  useEffect(() =&gt; {&#10;    if (isAuthenticated) {&#10;      const interval = setInterval(() =&gt; {&#10;        checkAuth();&#10;      }, 12 * 60 * 1000); // 12 minutes&#10;&#10;      return () =&gt; clearInterval(interval);&#10;    }&#10;  }, [isAuthenticated]);&#10;&#10;  const checkAuth = async () =&gt; {&#10;    if (authService.isAuthenticated()) {&#10;      try {&#10;        const profile = await authService.getProfile();&#10;        setUser(profile);&#10;        setIsAuthenticated(true);&#10;      } catch (error) {&#10;        console.error('Erreur lors de la vérification de l\'authentification:', error);&#10;        setIsAuthenticated(false);&#10;        setUser(null);&#10;      }&#10;    } else {&#10;      setIsAuthenticated(false);&#10;      setUser(null);&#10;    }&#10;    setLoading(false);&#10;  };&#10;&#10;  const login = async (username, password, rememberMe = false) =&gt; {&#10;    try {&#10;      const data = await authService.login(username, password, rememberMe);&#10;      setUser(data.user);&#10;      setIsAuthenticated(true);&#10;      return { success: true };&#10;    } catch (error) {&#10;      // eslint-disable-next-line no-console&#10;      console.error('Erreur de connexion:', error);&#10;      return {&#10;        success: false,&#10;        error: error.response?.data?.message || 'Erreur de connexion',&#10;      };&#10;    }&#10;  };&#10;&#10;  const logout = async () =&gt; {&#10;    try {&#10;      await authService.logout();&#10;    } finally {&#10;      setIsAuthenticated(false);&#10;      setUser(null);&#10;    }&#10;  };&#10;&#10;  const changePassword = async (currentPassword, newPassword) =&gt; {&#10;    try {&#10;      const result = await authService.changePassword(currentPassword, newPassword);&#10;      return { success: true, message: result.message };&#10;    } catch (error) {&#10;      return {&#10;        success: false,&#10;        error: error.response?.data?.message || 'Erreur lors du changement de mot de passe',&#10;      };&#10;    }&#10;  };&#10;&#10;  const value = {&#10;    isAuthenticated,&#10;    user,&#10;    loading,&#10;    login,&#10;    logout,&#10;    changePassword,&#10;    checkAuth,&#10;  };&#10;&#10;  return &lt;AuthContext.Provider value={value}&gt;{children}&lt;/AuthContext.Provider&gt;;&#10;};&#10;&#10;export const useAuth = () =&gt; {&#10;  const context = useContext(AuthContext);&#10;  if (!context) {&#10;    throw new Error('useAuth doit être utilisé dans un AuthProvider');&#10;  }&#10;  return context;&#10;};&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front/src/sass/_offers.sass">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front/src/sass/_offers.sass" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front/src/sass/offers_bilan_button.sass">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front/src/sass/offers_bilan_button.sass" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>